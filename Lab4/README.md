Building off the prior labs, we expand on our knowledge of having built driver functions for the magnetometer and enabled SPI protocol interfacing using FreeRTOS functionalities. In this lab we incorporate Interrupts into the fold. Interrupts are an important part of embedded system programming. It sends a signal to the processor that an event has occurred that may require additional handling, which is done by the interrupt service routine (ISR), or interrupt handler. In this lab, we modified the code developed in the prior lab to set a threshold for magnetic signals that would trigger an interrupt, and also similarly found a means for disabling the interrupt. On the PowerDue, it was set up so that the EXTSPISSO pin number 4 is our SPI chip select pin and GPIO pin 51 as the interrupt pin. Finally, we are able to dynamically calibrate the magnetometer and see that the interrupts triggering as we engaged the senor with a magnetic object. These results can be obsered via observing the interrupts on an oscilloscope as well as serial monitor output as intended.
